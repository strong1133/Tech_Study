> # TIL - 2021-03-31

## ğŸ’¡ DI

<hr/>

> ì˜ˆë¥¼ ë“¤ì–´,

<div style="text-align:center"><img src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4872cfc3-c1a2-41a8-9aba-36bad97e1d0f%2FUntitled.png?table=block&id=359648aa-4a44-41c6-b07a-32b09ab325fc&width=1790&userId=582806da-b4e3-4c8c-8573-a1b75f56bbb5&cache=v2" width="70%">
</img></div>

- ìœ„ ë„ì‹í‘œì™€ ê°™ì´ Contoller 5ê°œê°€ ê°ê° Service1ì„ ì‚¬ìš© í•œë‹¤ë©´
- ê° ContollerëŠ” Service1ì„ ìƒì„± í•´ì•¼í•˜ê³ 
- Service1ì€ ê°ê° Repostiroy1ì„ ìƒì„± í•´ì•¼í•œë‹¤.
- Contoller5ê°œ ì²˜ë¦¬ë¥¼ ìœ„í•´ Service1, Repostiroy1ê°€ 5ê°œì”© ìƒê¸°ê³ 
- ë§Œì•½ DBì •ë³´ê°€ ë°”ë€Œê²Œ ë˜ë©´ Service1 5ê°œì™€ Repostiroy1 5ê°œì˜ ì½”ë“œë¥¼ ì´ 10ê°œ íŒŒì¼ì˜ ì½”ë“œë¥¼ ì°¾ì•„ì„œ ìˆ˜ì •í•´ì¤˜ì•¼í•œë‹¤.

_ì´ì™€ ê°™ì€ ë¬¸ì œì ì„ ì¤‘ë³µì½”ë“œ, ê°•í•œ ê²°í•©ì´ë¼í•œë‹¤._

- ê°•í•œê²°í•©: í•˜ë‚˜ì˜ í´ë˜ìŠ¤ ìƒì„±ì ë³€í™”ê°€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ì˜í–¥ì„ ì£¼ëŠ” ê²ƒ

> í•´ê²° -> ì˜ì¡´ì„± ì£¼ì…

<div style="text-align:center"><img src="https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3f9e6214-caeb-4616-b7ed-39bfe685b59e%2FUntitled.png?table=block&id=bf032da0-dc9e-40ee-9fb0-a93f118215a4&width=1790&userId=582806da-b4e3-4c8c-8573-a1b75f56bbb5&cache=v2" width="70%">
</img></div>

- Contoller 5ê°œê°€ Service1ì„ ì‚¬ìš©í•˜ë ¤ í• ë•Œ Service1ì„ ê·¸ë•Œ ê·¸ë•Œ ë§Œë“¤ì§€ ë§ê³  ìµœì´ˆì•  ë¯¸ë¦¬ í•˜ë‚˜ ë§Œë“¤ì–´ ë†“ê³  ê°€ì ¸ë‹¤ ì“°ê¸°ë§Œ í•˜ë©´ ì–´ë–¨ê¹Œ
- ë§ˆì°¬ê°€ì§€ë¡œ Repostiroy1ì—­ì‹œ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ì€ Repostiroy1ì„ ê°€ì ¸ ì“°ê²Œë” í•˜ë©´
- Repostiroy1 ë‚´ìš©ì— ë³€ê²½ì´ ìƒê²¨ë„ Repostiroy1ì´ ë§Œë“¤ì–´ ì§€ëŠ” ë¶€ë¶„ë§Œ ê³ ì¹˜ë©´ í•´ê²°ëœë‹¤.

- ì´ë ‡ê²Œ ê°ì²´ì—ì„œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ë¶€ë¥¼ë•Œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…ì„ `ì˜ì¡´ì„± ì£¼ì…` ì´ë¼ í•˜ë©° ì˜ì–´ë¡œ `DI - Dependency Injection` ë¼ê³  í•œë‹¤.

        DI ëŠ” ìì‹ ì´ í•„ìš”í•œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ í•„ìš”ì— ì˜í•´ ìš”ì²­ì„ í•˜ê²Œ ë˜ëŠ” ëª¨ì–‘ì´ë‹¤.
        ë§Œì•½ Aê°€ Bë¥¼ í•„ìš”ë¡œ í• ë•Œ A ê°€ Bë¥¼ ë§Œë“œëŠ” A->B ê°€ ì•„ë‹Œ Bì—ê²Œ ë„ˆê°€ í•„ìš”í•˜ë‹ˆê¹Œ ì™€ì¤„ìˆ˜ ìˆë‹ˆ?
        í•˜ë©° ìš”ì²­í•˜ëŠ” A <- B ê°€ ë˜ë¯€ë¡œ ì œì–´ì˜ íë¦„ì´ ì—­ì „ë¬ë‹¤ í•˜ëŠ” ì˜ë¯¸ë¡œ 'ì œì–´ì˜ ì—­ì „ (IoC: Inversion of Control)' ë¼ê³  ë¶€ë¥´ê²Œ ëœë‹¤.

</br></br></br>

## ğŸ’¡ Bean, IoC ì»¨í…Œì´ë„ˆ

<hr/>

- DI ë¥¼ í•´ì¤„ë ¤ë©´ ìš°ì„  ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ê°ì²´ê°€ ìˆì–´ì•¼ ë¹Œë ¤ ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ.

- ì´ë ‡ê²Œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ê³µì¥ì´ `Bean`ì´ë‹¤.
- Beanì€ ìŠ¤í”„ë§ì¸¡ì—ì„œ ë§Œë“¤ì–´ì¤€ ê³µì¥ìœ¼ë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë‚¼ìˆ˜ ìˆê³  ì´ëŸ° ê³µì¥ë“¤ì´ ëª¨ì—¬ìˆëŠ” ê³³ì´ `IoC ì»¨í…Œì´ë„ˆ ì´ë‹¤.`

- Beanì„ í†µí•´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ëª¨ì•„ ë‘ëŠ”ê³³ì„ ì¼ì¢…ì˜ í´ë˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ëŠ”ë°

```java
package com.sparta.springcore;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class BeanConfiguration {
    @Bean // ì´ë ‡ê²Œ Beanì„ì„ ëª…ì‹œ
    public ProductRepository productRepository() {
        String dbId = "sa";
        String dbPassword = "";
        String dbUrl = "jdbc:h2:mem:springcoredb";
        return new ProductRepository(dbId, dbPassword, dbUrl);
    }

    @Bean
    @Autowired
    public ProductService productService(ProductRepository productRepository) {
        return new ProductService(productRepository);
    }
}

```

- ì´ë ‡ê²Œ BeanConfiguration í´ë ˆìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤˜ë„ ë˜ì§€ë§Œ
- ìŠ¤í”„ë§ì„ í†µí•´ ë” ì‰½ê²Œ í• ìˆ˜ ìˆë‹¤
- @Restcontroller, @Service, @Repository ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ ëª¨ë‘ Beanìœ¼ë¡œ ë“±ë¡ë˜ë©° ë‚˜ì•„ê°€ íŠ¹ë³„í•œ ì—­í™œì„ í•˜ëŠ” Beanìœ¼ë¡œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤.
